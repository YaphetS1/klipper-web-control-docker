################################################################################
# Board: MKS Robin Nano v1.1 (Flying Bear Reborn 2.0) / MKS Robin Nano v1.3 / MKS Robin Nano-S v1.3
# Printer: Flying Bear Ghost 5
# Config by ODUCCEU
################################################################################
# WARNING! DO NOT EDIT THIS FILE!
# To override settings from this file, you can copy and paste the relevant
# sections into your printer.cfg and change it there.
################################################################################

# Documentation
# https://www.klipper3d.org/Config_Reference.html

################################################################################
# X, Y, Z
################################################################################

[stepper_x]
step_pin: X_STEP_PIN
dir_pin: X_DIR_PIN
enable_pin: !X_ENABLE_PIN
rotation_distance: 40
microsteps: 16
endstop_pin: !X_STOP_PIN
position_min: 0                                                              # -1.2 home offset, measure yours or disable for no offset
position_endstop: 0                                                          # -1.2 home offset, measure yours or set '0' for no offset
position_max: 251                                                               # X-axis bed size - 255mm default
homing_speed: 100
homing_retract_dist: 0                                                          # disable for head retraction after homing

[stepper_y]
step_pin: Y_STEP_PIN
dir_pin: Y_DIR_PIN
enable_pin: !Y_ENABLE_PIN
rotation_distance: 40
microsteps: 16
endstop_pin: !Y_STOP_PIN
position_min: -1.2                                                              # home offset, measure yours or disable for no offset
position_endstop: -1.2                                                          # home offset, measure yours or set '0' for no offset
position_max: 210                                                               # Y-axis bed size - 210mm default
homing_speed: 100
homing_retract_dist: 0                                                          # disable for head retraction after homing

[stepper_z]                                                                     # left stepper
step_pin: Z_STEP_PIN
dir_pin: Z_DIR_PIN
enable_pin: !Z_ENABLE_PIN
rotation_distance: 8
microsteps: 16
endstop_pin: !Z_STOP_PIN
position_max: 206                                                               # Z-axis print volume size
homing_speed: 20
second_homing_speed: 5

################################################################################
# E0, HB
################################################################################

[extruder]
step_pin: E0_STEP_PIN
dir_pin: E0_DIR_PIN
enable_pin: !E0_ENABLE_PIN
rotation_distance: 7.600
microsteps: 16
nozzle_diameter: 0.400
filament_diameter: 1.750
max_extrude_only_distance: 100                                                  # ~100 direct, ~600 bowden
heater_pin: E_HEATER_PIN
sensor_type: EPCOS 100K B57560G104F
sensor_pin: E_SENSOR_PIN
min_temp: 0
max_temp: 285

[heater_bed]
heater_pin: BED_HEATER_PIN
sensor_type: EPCOS 100K B57560G104F
sensor_pin: BED_SENSOR_PIN
min_temp: 0
max_temp: 130

################################################################################
# Fans
################################################################################

[fan]
pin: PARTCOOLING_FAN_PIN

[heater_fan heater_fan]
pin: HEATER_FAN_PIN

################################################################################
# Printer
################################################################################

[printer]
kinematics: cartesian
max_velocity: 150
#   Maximum velocity (in mm/s) of the toolhead (relative to the
#   print). This parameter must be specified.
max_accel: 3000
#   Maximum acceleration (in mm/s^2) of the toolhead (relative to the
#   print). This parameter must be specified.
max_accel_to_decel: 1500
#   A pseudo acceleration (in mm/s^2) controlling how fast the
#   toolhead may go from acceleration to deceleration. It is used to
#   reduce the top speed of short zig-zag moves (and thus reduce
#   printer vibration from these moves). The default is half of
#   max_accel.
square_corner_velocity: 5.0
#   The maximum velocity (in mm/s) that the toolhead may travel a 90
#   degree corner at. A non-zero value can reduce changes in extruder
#   flow rates by enabling instantaneous velocity changes of the
#   toolhead during cornering. This value configures the internal
#   centripetal velocity cornering algorithm; corners with angles
#   larger than 90 degrees will have a higher cornering velocity while
#   corners with angles less than 90 degrees will have a lower
#   cornering velocity. If this is set to zero then the toolhead will
#   decelerate to zero at each corner. The default is 5mm/s.
max_z_velocity: 20
#   This sets the maximum velocity (in mm/s) of movement along the z
#   axis. This setting can be used to restrict the maximum speed of
#   the z stepper motor. The default is to use max_velocity for
#   max_z_velocity.
max_z_accel: 100
#   This sets the maximum acceleration (in mm/s^2) of movement along
#   the z axis. It limits the acceleration of the z stepper motor. The
#   default is to use max_accel for max_z_accel.

################################################################################
# Optional G-Code features
################################################################################

[virtual_sdcard]
path: ~/printer_data/gcodes

[pause_resume]

[display_status]

[firmware_retraction]
retract_length: 2
retract_speed: 100
unretract_speed: 100

[respond]

################################################################################
# Bed leveling
################################################################################

# Reference: distance from bed edge to screw center is 35mm on X axis and 32.5mm on Y.
# Bed size is 275x215mm and print area size is 255x210mm.

[bed_screws]
screw1: 25,30
screw1_name: front left screw
screw2: 230,30
screw2_name: front right screw
screw3: 230,180
screw3_name: back right screw
screw4: 25,180
screw4_name: back left screw
horizontal_move_z: 10
speed: 100

################################################################################
